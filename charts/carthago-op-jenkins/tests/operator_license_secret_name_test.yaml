suite: test Jenkins
templates:
  - operator.yaml
tests:
  - it: should propagate license name correctly to args (flags) if there is one present in values.yaml
    values:
      - values/operator_licensesecretname_test_licensesecretname_present.yaml
    asserts:
      - equal:
          path: spec.template.spec.containers[0].args
          value: ["--leader-elect=true", "--license-secret=license"]

  - it: should propagate append nothing to args (flags) if values.yaml lacks licenseSecretName
    values:
      - values/operator_licensesecretname_test_licensesecretname_missing.yaml
    asserts:
      - equal:
          path: spec.template.spec.containers[0].args
          value: [ "--leader-elect=true"]
